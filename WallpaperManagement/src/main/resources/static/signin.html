<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>注册</title>
    <link type="text/css" href="css/signin.css" rel="stylesheet"/>
    <script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/jquery/2.1.3/jquery.min.js"></script>
    <script>
        $(function () {
            $("#but").click(submit);

            function submit() {
                var userName = $("#userName").val();
                var password = $("#password").val();
                var flag = true;
                const regex = /^[a-zA-Z0-9_-]{3,20}$/;
                // 检查账号和密码是否为空
                if (userName == "") {
                    $("#msg").html("账号不许为空!");
                    flag = false;
                } else if (regex.test(userName) === false) {
                    $("#msg").html("账号格式错误！");
                    flag = false;
                } else if (password == "") {
                    $("#msg").html("密码不许为空!");
                    flag = false;
                }

                // 如果用户名和密码合法，发起 AJAX 请求
                if (flag) {
                    $.ajax({
                        url: "signin.do",
                        type: "post",
                        data: $("#form").serialize(),
                        success: function (data) {
                            if (data == 0) {
                                $("#msg").html("对不起，账号已被注册");
                            } else if (data == 1) {
                                alert("注册成功！");
                                window.location.href = "login.html";
                            }
                        }
                    });
                }
            }
        });
    </script>
</head>
<body>
<div id="login_wallpaper">
    <div><img src="images/1.png" width="100%" height="100%"/></div>
    <div><img src="images/2.png" width="100%" height="100%"/></div>
    <div><img src="images/3.png" width="100%" height="100%"/></div>
</div>
<button id="return" onclick="window.location.href='login.html';">
    <img src="images/return.png">
</button>

<div id="login">
    <h3 class="move" id="title">注册</h3>

    <div class="msg move" id="msg"></div>
    <form id="form">
        <input type="text" placeholder="账号：长度3~20,大小写字母,数字, - , _" id="userName" class="txt move userName" name="userName" required
               autocomplete="off">
        <input type="password" placeholder="密码" id="password" class="txt move password" name="password"
               required>
        <input type="text" placeholder="昵称(选填)" id="nickname" class="txt move nickname" name="nickname" required>
        <input type="text" placeholder="邮箱(选填)" id="mail" class="txt move mail" name="mail" required>
        <input type="text" placeholder="手机号(选填)" id="phone" class="txt move phone" name="phone" required>
        <input type="date" placeholder="生日(选填)" id="birthday" class="txt move birthday" name="birthday" required>
    </form>
    <input type="button" id="but" class="but move" value="注 册"><br>
</div>
<script src="./js/demo.js"></script>
<script src="./js/jquery-1.11.1.min.js"></script>
</body>
</html>